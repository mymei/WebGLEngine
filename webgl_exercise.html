<canvas id="canvas" width='400' height='300' style="background-color:rgba(0, 0, 0, 0.5)"></canvas>
<script type="text/javascript" src="lib/jquery-2.0.0.min.js"></script>
<script type="text/javascript" src="lib/gl-matrix.js"></script>
<script type="text/javascript" src="lib/webgl-debug.js"></script>
<script type="text/javascript" src="lib/xml2json.js"></script>
<script type="text/javascript" src="lib/msgpack.js"></script>

<script type="text/javascript" src="src/common/serialization.js"></script>

<script type="text/javascript" src="src/collada_parser/common.js"></script>
<script type="text/javascript" src="src/collada_parser/scene.js"></script>
<script type="text/javascript" src="src/collada_parser/animation.js"></script>
<script type="text/javascript" src="src/collada_parser/skin.js"></script>
<script type="text/javascript" src="src/collada_parser/geometry.js"></script>
<script type="text/javascript" src="src/collada_parser/mesh.js"></script>
<script type="text/javascript" src="src/collada_parser/polygon.js"></script>
<script type="text/javascript" src="src/collada_parser/meshdata.js"></script>
<script type="text/javascript" src="src/collada_parser/buffer.js"></script>
<script type="text/javascript" src="src/collada_parser/controller.js"></script>
<script type="text/javascript" src="src/collada_parser/asset.js"></script>

<script type="text/javascript" src="src/webgl/webgl_core.js"></script>
<script type="text/javascript" src="src/webgl/drawingelement.js"></script>
<script type="text/javascript" src="src/webgl/colladaelement.js"></script>
<script type="text/javascript" src="src/webgl/planeelement.js"></script>
<script type="text/javascript" src="src/webgl/primitive.js"></script>

<script type="text/javascript" src="src/scene/sceneNode.js"></script>
<script type="text/javascript" src="src/scene/sceneCamera.js"></script>

<script type="text/javascript">
	var canvas = document.getElementById("canvas"), gl = canvas.getContext('experimental-webgl');

	gl.clearColor(0.15, 0.15, 1, 0.5);
	gl.enable(gl.DEPTH_TEST);

	var eagleDE = new ColladaElement('resources/my_shader2.fs', createPackedObject('./eagle.mbf'));
	eagleDE.asset.animation = createPackedObject('./eagle.ani');
	var charDE = new ColladaElement('resources/my_shader2.fs', createPackedObject('./rigg.mbf'));
	charDE.asset.animation = createPackedObject('./anim.ani');

	var scene = new Node;

	var test = new Node;
	scene.add(test);
	test.de = eagleDE
	vec3.set(test.position, 0, 0, 0);
	test.updateMatrix();

	var test2 = new Node;
	test.add(test2);
	test2.de = charDE;
	test2.applyMatrix(getTransform([-50, 0, 0], [1.6, 1, 0, 0], [50, 50, 50]));
	test2.updateMatrix();

	var cameraNode = new Camera;
	scene.add(cameraNode);
	cameraNode.setPerspective(3.14 / 180 * 60, canvas.width / canvas.height, 0.1, 1000);
	cameraNode.applyMatrix(getTransform([0, 0, -505], [0, 1, 0, 0], [1, 1, 1]));
	cameraNode.updateMatrix();

	var startTime = 0;

	cycle(Date.now());

	function cycle(time) {
		gl.clear(gl.COLOR_BUFFER_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);
		gl.viewport(0, 0, canvas.width, canvas.height);

		scene.updateMatrixWorld();
		scene.draw(cameraNode, time / 1000);

		webkitRequestAnimationFrame(cycle);
	}
</script>